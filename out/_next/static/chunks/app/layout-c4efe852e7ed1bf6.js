(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[177],{19324:()=>{},50395:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>i,_:()=>n});var s=r(95155);var a=r(12115);const o=(0,a.createContext)(undefined);const n={superadmin:{id:"demo-superadmin",name:"Carlos Rodr\xedguez",email:"superadmin@omv.com",role:"superadmin",avatar:"/placeholder-user.jpg",department:"Administraci\xf3n",permissions:["users.read","users.write","users.delete","sims.read","sims.write","sims.delete","customers.read","customers.write","customers.delete","tickets.read","tickets.write","tickets.assign","balance.read","balance.write","balance.transfer","reports.read","reports.generate","reports.export","settings.read","settings.write","webhooks.read","webhooks.write","warehouse.read","warehouse.write","billing.read","billing.write","plans.read","plans.write"]},admin:{id:"demo-admin",name:"Mar\xeda Gonz\xe1lez",email:"admin@omv.com",role:"admin",avatar:"/placeholder-user.jpg",department:"Operaciones",supervisor:"Carlos Rodr\xedguez",permissions:["users.read","users.write","sims.read","sims.write","customers.read","customers.write","tickets.read","tickets.write","tickets.assign","balance.read","balance.write","balance.transfer","reports.read","reports.generate","warehouse.read","warehouse.write","billing.read","plans.read","plans.write"]},gerente:{id:"demo-gerente",name:"Juan Mart\xednez",email:"gerente@omv.com",role:"gerente",avatar:"/placeholder-user.jpg",department:"Ventas",supervisor:"Mar\xeda Gonz\xe1lez",permissions:["users.read","sims.read","sims.write","customers.read","customers.write","tickets.read","tickets.write","balance.read","balance.transfer","reports.read","reports.generate","warehouse.read","plans.read"]},operator:{id:"demo-operator",name:"Ana L\xf3pez",email:"operator@omv.com",role:"operator",avatar:"/placeholder-user.jpg",department:"Operaciones",supervisor:"Juan Mart\xednez",permissions:["sims.read","sims.write","customers.read","customers.write","tickets.read","tickets.write","balance.read","activations.read","activations.write","recharges.read","recharges.write"]},subdistributor:{id:"demo-subdistributor",name:"Pedro S\xe1nchez",email:"subdistributor@omv.com",role:"subdistributor",avatar:"/placeholder-user.jpg",department:"Distribuci\xf3n",supervisor:"Ana L\xf3pez",permissions:["sims.read","customers.read","customers.write","tickets.read","tickets.write","balance.read","activations.read","activations.write","recharges.read","recharges.write"]},vendor:{id:"demo-vendor",name:"Laura D\xedaz",email:"vendor@omv.com",role:"vendor",avatar:"/placeholder-user.jpg",department:"Ventas",supervisor:"Pedro S\xe1nchez",permissions:["customers.read","customers.write","tickets.read","tickets.write","balance.read","activations.read","activations.write","recharges.read","recharges.write"]}};function i(e){let{children:t}=e;const[r,i]=(0,a.useState)(null);const[c,d]=(0,a.useState)(true);(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("omv_user");const t=localStorage.getItem("omv_session_token");const r=localStorage.getItem("omv_session_expiry");if(e&&t&&r){const t=new Date(r);const s=new Date;if(s<t){i(JSON.parse(e))}else{u()}}}catch(e){console.error("Error initializing auth:",e);u()}finally{d(false)}};e()},[]);const u=()=>{localStorage.removeItem("omv_user");localStorage.removeItem("omv_session_token");localStorage.removeItem("omv_session_expiry");sessionStorage.clear()};const l=e=>{const t=new Date;t.setHours(t.getHours()+8);const r="omv_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));localStorage.setItem("omv_user",JSON.stringify(e));localStorage.setItem("omv_session_token",r);localStorage.setItem("omv_session_expiry",t.toISOString());i(e)};const m=async(e,t)=>{d(true);try{await new Promise(e=>setTimeout(e,1e3));const r=Object.values(n).find(t=>t.email===e);if(r&&t){l(r);d(false);return true}d(false);return false}catch(e){console.error("Login error:",e);d(false);return false}};const f=async e=>{d(true);try{await new Promise(e=>setTimeout(e,800));const t=n[e];if(t){l(t);d(false);return true}d(false);return false}catch(e){console.error("Demo login error:",e);d(false);return false}};const p=async()=>{d(true);try{await new Promise(e=>setTimeout(e,500));u();i(null);if(true){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&r.startsWith("omv_")){e.push(r)}}e.forEach(e=>localStorage.removeItem(e))}d(false)}catch(e){console.error("Logout error:",e);u();i(null);d(false)}};const v=e=>{if(r){const t={...r,...e};i(t);localStorage.setItem("omv_user",JSON.stringify(t))}};const g=e=>{if(!r)return false;return r.permissions.includes(e)};const w=e=>{if(!r)return false;return e.includes(r.role)};(0,a.useEffect)(()=>{if(!r)return;const e=()=>{const e=localStorage.getItem("omv_session_expiry");if(e){const t=new Date(e);const r=new Date;if(r>=t){p()}}};const t=setInterval(e,6e4);return()=>clearInterval(t)},[r]);const h={user:r,isAuthenticated:!!r,isLoading:c,login:m,loginAsDemo:f,logout:p,updateUser:v,hasPermission:g,hasRole:w};return(0,s.jsx)(o.Provider,{value:h,children:t})}function c(){const e=(0,a.useContext)(o);if(e===undefined){throw new Error("useAuth must be used within an AuthProvider")}return e}},53580:(e,t,r)=>{"use strict";r.d(t,{dj:()=>g,oR:()=>v});var s=r(12115);const a=1;const o=5e3;const n={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let i=0;function c(){i=(i+1)%Number.MAX_SAFE_INTEGER;return i.toString()}const d=new Map;const u=e=>{if(d.has(e)){return}const t=setTimeout(()=>{d.delete(e);p({type:"REMOVE_TOAST",toastId:e})},o);d.set(e,t)};const l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;if(r){if(d.has(r)){clearTimeout(d.get(r));d.delete(r)}u(r)}else{e.toasts.forEach(e=>{if(d.has(e.id)){clearTimeout(d.get(e.id));d.delete(e.id)}u(e.id)})}return{...e,toasts:e.toasts.map(e=>e.id===r||r===undefined?{...e,open:false}:e)}}case"REMOVE_TOAST":if(t.toastId===undefined){d.forEach(e=>clearTimeout(e));d.clear();return{...e,toasts:[]}}if(d.has(t.toastId)){clearTimeout(d.get(t.toastId));d.delete(t.toastId)}return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};const m=[];let f={toasts:[]};function p(e){f=l(f,e);m.forEach(e=>{e(f)})}function v(e){let{...t}=e;const r=c();const s=e=>p({type:"UPDATE_TOAST",toast:{...e,id:r}});const a=()=>p({type:"DISMISS_TOAST",toastId:r});p({type:"ADD_TOAST",toast:{...t,id:r,open:true,onOpenChange:e=>{if(!e)a()}}});return{id:r,dismiss:a,update:s}}function g(){const[e,t]=s.useState(f);s.useEffect(()=>{m.push(t);return()=>{const e=m.indexOf(t);if(e>-1){m.splice(e,1)}}},[e]);return{...e,toast:v,dismiss:e=>p({type:"DISMISS_TOAST",toastId:e})}}},53999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(52596);var a=r(39688);function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return(0,a.QP)((0,s.$)(t))}},65038:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>h});var s=r(95155);var a=r(53580);var o=r(12115);var n=r(48490);var i=r(74466);var c=r(54416);var d=r(53999);const u=n.Kq;const l=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...a})});l.displayName=n.LM.displayName;const m=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}});const f=o.forwardRef((e,t)=>{let{className:r,variant:a,...o}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,d.cn)(m({variant:a}),r),...o})});f.displayName=n.bL.displayName;const p=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...a})});p.displayName=n.rc.displayName;const v=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...a,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})});v.displayName=n.bm.displayName;const g=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",r),...a})});g.displayName=n.hE.displayName;const w=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",r),...a})});w.displayName=n.VY.displayName;function h(){const{toasts:e}=(0,a.dj)();return(0,s.jsxs)(u,{children:[e.map(function(e){let{id:t,title:r,description:a,action:o,...n}=e;return(0,s.jsxs)(f,{...n,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[r&&(0,s.jsx)(g,{children:r}),a&&(0,s.jsx)(w,{children:a})]}),o,(0,s.jsx)(v,{})]},t)}),(0,s.jsx)(l,{})]})}},68122:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,19324,23));Promise.resolve().then(r.bind(r,65038));Promise.resolve().then(r.bind(r,50395))}},e=>{var t=t=>e(e.s=t);e.O(0,[533,185,490,441,684,358],()=>t(68122));var r=e.O();_N_E=r}]);